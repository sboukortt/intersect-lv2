include_rules

DEPS = third_party/lvtk.a
CXXFLAGS += -Ithird_party/lvtk

LIBS = lv2 fftw3f eigen3
CXXFLAGS += `@(PKGCONFIG) --cflags $(LIBS)`
LFLAGS += `@(PKGCONFIG) --libs $(LIBS)`

CXXFLAGS += -DEIGEN_FFTW_DEFAULT

: foreach src/*.cc |> !cxx |> obj/%B.o {objs}
: {objs} $(DEPS) |> !so |> intersect.lv2/intersect.@(EXT) <lv2>

: foreach metadata/*.ttl |> cp %f %o |> intersect.lv2/%b <lv2>
: foreach metadata/*.in |> tup varsed %f %o |> intersect.lv2/%B <lv2>
